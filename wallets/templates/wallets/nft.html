{% extends "wallets/base.html" %}
{% block title %}fin.ai - NFT Portfolio{% endblock %}
{% block header %}NFT Portfolio{% endblock %}
{% block content %}
<!-- 
  Full-screen grid layout:
  - 3 columns, 2 rows
  - 6 total blocks
  - No scrolling
-->
<div class="w-full h-full grid grid-cols-3 grid-rows-2 gap-4 p-4">

  <!-- Card 1: Total NFT Value & Gains -->
  <div class="bg-pink-200 rounded-lg shadow flex flex-col justify-between p-4">
    <div>
      <h3 class="text-sm font-semibold text-gray-700 mb-1">Total NFT Value</h3>
      <div class="flex items-baseline">
        <span class="text-3xl font-bold text-gray-900 mr-2">$6,200</span>
        <span class="text-sm text-green-800 font-semibold">+4.1%</span>
      </div>
      <p class="text-xs text-gray-600 mt-2">vs. last month</p>
    </div>
    <div class="flex items-center space-x-2 text-xs text-gray-700">
      <div class="bg-green-600 h-2 w-3/4 rounded-full"></div>
      <span>Steady Growth</span>
    </div>
  </div>

  <!-- Card 2: Rarity & Distribution (Pie/Donut Chart) -->
  <div class="bg-yellow-200 rounded-lg shadow p-4 relative">
    <h3 class="text-sm font-semibold text-gray-700 mb-2">Rarity & Distribution</h3>
    <div class="relative w-full h-[150px]">
      <canvas id="nft-rarity-donut" class="absolute top-0 left-0 w-full h-full"></canvas>
    </div>
    <p class="text-xs text-gray-600 mt-2">
      Breakdown of your NFTs by rarity tier (Common, Rare, Legendary).
    </p>
  </div>

  <!-- Card 3: Floor Price Movement (Line Chart) -->
  <div class="bg-green-200 rounded-lg shadow p-4 relative">
    <h3 class="text-sm font-semibold text-gray-700 mb-2">Floor Price Movement</h3>
    <div class="relative w-full h-[150px]">
      <canvas id="floor-price-line" class="absolute top-0 left-0 w-full h-full"></canvas>
    </div>
    <p class="text-xs text-gray-600 mt-2">7-day average floor across top collections</p>
  </div>

  <!-- Card 4: Daily Volume & Liquidity (Bar Chart) -->
  <div class="bg-blue-200 rounded-lg shadow p-4 relative">
    <h3 class="text-sm font-semibold text-gray-700 mb-2">Daily Volume & Liquidity</h3>
    <div class="relative w-full h-[150px]">
      <canvas id="nft-volume-bar" class="absolute top-0 left-0 w-full h-full"></canvas>
    </div>
    <p class="text-xs text-gray-600 mt-2">Tracked across all major NFT marketplaces</p>
  </div>

  <!-- Card 5: High-Value NFTs & Gains -->
  <div class="bg-purple-200 rounded-lg shadow p-4">
    <h3 class="text-sm font-semibold text-gray-700 mb-2">High-Value NFTs</h3>
    <ul class="text-sm text-gray-800 space-y-1">
      <li>
        <strong>NFT #Alpha123</strong>
        <span class="text-green-800 font-semibold ml-1">+12%</span>
      </li>
      <li>
        <strong>NFT #Beta456</strong>
        <span class="text-green-800 font-semibold ml-1">+8%</span>
      </li>
      <li>
        <strong>NFT #Gamma789</strong>
        <span class="text-red-800 font-semibold ml-1">-3%</span>
      </li>
    </ul>
    <p class="text-xs text-gray-600 mt-2">
      Top holdings by current valuation. Gains reflect 7-day movement.
    </p>
  </div>

  <!-- Card 6: Quick Gallery Carousel (Horizontal) -->
  <div class="bg-red-200 rounded-lg shadow p-4 relative overflow-hidden">
    <h3 class="text-sm font-semibold text-gray-700 mb-2">Gallery Carousel</h3>
    <div class="absolute top-2 right-2 space-x-2">
      <button id="carouselLeft" class="bg-primary hover:bg-indigo-500 text-white px-2 py-1 rounded">←</button>
      <button id="carouselRight" class="bg-primary hover:bg-indigo-500 text-white px-2 py-1 rounded">→</button>
    </div>
    <div id="nftGalleryCarousel"
         class="flex space-x-2 overflow-x-auto h-[120px] snap-x scroll-smooth">
      <!-- Example NFT cards -->
      <div class="min-w-[100px] bg-gray-100 rounded snap-center flex-shrink-0">
        <img src="https://via.placeholder.com/100" alt="NFT1" class="w-full h-auto object-cover">
      </div>
      <div class="min-w-[100px] bg-gray-100 rounded snap-center flex-shrink-0">
        <img src="https://via.placeholder.com/100" alt="NFT2" class="w-full h-auto object-cover">
      </div>
      <div class="min-w-[100px] bg-gray-100 rounded snap-center flex-shrink-0">
        <img src="https://via.placeholder.com/100" alt="NFT3" class="w-full h-auto object-cover">
      </div>
      <!-- Add more as needed -->
    </div>
    <p class="text-xs text-gray-600 mt-2">Swipe or click arrows to browse quick previews</p>
  </div>

</div>
{% endblock %}

{% block extra_scripts %}
<script>
document.addEventListener("DOMContentLoaded", () => {
  // Donut Chart: Rarity & Distribution
  const rarityEl = document.getElementById("nft-rarity-donut");
  if (rarityEl) {
    new Chart(rarityEl.getContext("2d"), {
      type: "doughnut",
      data: {
        labels: ["Common", "Rare", "Legendary"],
        datasets: [{
          data: [50, 30, 20],
          backgroundColor: ["#A78BFA", "#FBBF24", "#F472B6"]
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false
      }
    });
  }

  // Line Chart: Floor Price Movement
  const floorEl = document.getElementById("floor-price-line");
  if (floorEl) {
    new Chart(floorEl.getContext("2d"), {
      type: "line",
      data: {
        labels: ["Day 1", "Day 2", "Day 3", "Day 4", "Day 5", "Day 6"],
        datasets: [{
          label: "Floor Price (USD)",
          data: [200, 210, 205, 220, 215, 225],
          borderColor: "#4F46E5",
          backgroundColor: "rgba(79,70,229,0.1)",
          fill: true,
          tension: 0.3
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false
      }
    });
  }

  // Bar Chart: Daily Volume & Liquidity
  const volumeEl = document.getElementById("nft-volume-bar");
  if (volumeEl) {
    new Chart(volumeEl.getContext("2d"), {
      type: "bar",
      data: {
        labels: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
        datasets: [{
          label: "Volume (USD)",
          data: [500, 700, 650, 800, 900, 750, 600],
          backgroundColor: "#34D399",
          borderRadius: 4
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          x: { display: true },
          y: { display: true }
        }
      }
    });
  }

  // Carousel: Quick Gallery
  const nftCarousel = document.getElementById("nftGalleryCarousel");
  const leftBtn = document.getElementById("carouselLeft");
  const rightBtn = document.getElementById("carouselRight");

  if (nftCarousel && leftBtn && rightBtn) {
    leftBtn.addEventListener("click", () => {
      nftCarousel.scrollBy({ left: -120, behavior: "smooth" });
    });
    rightBtn.addEventListener("click", () => {
      nftCarousel.scrollBy({ left: 120, behavior: "smooth" });
    });
  }
});
</script>
{% endblock %}
