{% extends "wallets/base.html" %}
{% block title %}fin.ai - Overview{% endblock %}
{% block header %}Overview{% endblock %}
{% block content %}
<div class="w-full h-full grid grid-cols-3 grid-rows-2 gap-4 p-4">

  <!-- Card 1: Total Portfolio Value -->
  <div class="bg-pink-200 rounded-lg shadow p-4 flex flex-col justify-between">
    <div>
      <h3 class="text-sm font-semibold text-gray-700 mb-1">Total Portfolio Value</h3>
      <div class="flex items-baseline">
        <span class="text-3xl font-bold text-gray-900 mr-2">$72,300</span>
        <span class="text-sm text-green-800 font-semibold">+2.7%</span>
      </div>
      <p class="text-xs text-gray-600 mt-2">vs. last week</p>
    </div>
    <div class="flex items-center space-x-2 text-xs text-gray-700">
      <div class="bg-green-600 h-2 w-3/4 rounded-full"></div>
      <span>Growth Trend</span>
    </div>
  </div>

  <!-- Card 2: Income vs. Expense (Bar or Mixed Chart) -->
  <div class="bg-yellow-200 rounded-lg shadow p-4 relative">
    <h3 class="text-sm font-semibold text-gray-700 mb-2">Income vs. Expense</h3>
    <div class="relative w-full h-[150px]">
      <canvas id="income-expense-chart" class="absolute top-0 left-0 w-full h-full"></canvas>
    </div>
    <p class="text-xs text-gray-600 mt-2">Monthly breakdown of net cash flow</p>
  </div>

  <!-- Card 3: Subscription Revenue / Passive Income -->
  <div class="bg-green-200 rounded-lg shadow p-4">
    <h3 class="text-sm font-semibold text-gray-700 mb-2">Passive Income Streams</h3>
    <p class="text-3xl font-bold text-gray-900">$2,100/mo</p>
    <p class="text-xs text-gray-600 mt-2">Staking rewards, yield farming, etc.</p>
    <div class="mt-4 w-full h-2 bg-blue-600 rounded-full"></div>
  </div>

  <!-- Card 4: Bank Balance or Stable Holdings (Line Chart) -->
  <div class="bg-blue-200 rounded-lg shadow p-4 relative">
    <h3 class="text-sm font-semibold text-gray-700 mb-2">Bank/Stable Balance</h3>
    <div class="relative w-full h-[150px]">
      <canvas id="stable-line-chart" class="absolute top-0 left-0 w-full h-full"></canvas>
    </div>
    <p class="text-xs text-gray-600 mt-2">Ensuring liquidity for risk management</p>
  </div>

  <!-- Card 5: Key Ratings (Pie/Donut or Stats) -->
  <div class="bg-purple-200 rounded-lg shadow p-4">
    <h3 class="text-sm font-semibold text-gray-700 mb-2">Overall Rating</h3>
    <ul class="text-sm text-gray-800 space-y-1">
      <li>Risk Tolerance: Moderate</li>
      <li>Diversification: 85% (Great)</li>
      <li>Liquidity: Good</li>
    </ul>
    <p class="text-xs text-gray-600 mt-2">Based on 5 main metrics</p>
  </div>

  <!-- Card 6: Future Forecast or Roadmap -->
  <div class="bg-red-200 rounded-lg shadow p-4">
    <h3 class="text-sm font-semibold text-gray-700 mb-2">Future Forecast</h3>
    <p class="text-sm text-gray-800">Next 3 months predicted performance: <span class="font-bold text-green-800">+8%</span></p>
    <p class="text-xs text-gray-600 mt-2">Generated by AI-based modeling</p>
  </div>

</div>
{% endblock %}

{% block extra_scripts %}
<script>
document.addEventListener("DOMContentLoaded", () => {
  // Income vs. Expense (Bar Chart)
  const incExpEl = document.getElementById("income-expense-chart");
  if (incExpEl) {
    new Chart(incExpEl.getContext("2d"), {
      type: "bar",
      data: {
        labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
        datasets: [
          {
            label: "Income",
            data: [5000, 5200, 4800, 5300, 5500, 5700],
            backgroundColor: "#4F46E5",
            borderRadius: 4
          },
          {
            label: "Expense",
            data: [3000, 3100, 2900, 3200, 3300, 3400],
            backgroundColor: "#F59E0B",
            borderRadius: 4
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          x: { display: true },
          y: { display: true }
        }
      }
    });
  }

  // Stable Balance (Line Chart)
  const stableEl = document.getElementById("stable-line-chart");
  if (stableEl) {
    new Chart(stableEl.getContext("2d"), {
      type: "line",
      data: {
        labels: ["Week 1", "Week 2", "Week 3", "Week 4"],
        datasets: [{
          label: "Stable/Bank Balance",
          data: [8000, 8500, 8300, 8700],
          borderColor: "#10B981",
          backgroundColor: "rgba(16,185,129,0.2)",
          fill: true,
          tension: 0.3
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false
      }
    });
  }
});
</script>
{% endblock %}
